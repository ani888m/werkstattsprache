<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Bedarfsfeststellung ‚Äì Integriertes Fach- und Sprachlernen</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 700px;
      margin: 20px auto;
      line-height: 1.5;
      background-color: #f9f9f9;
    }
    h1 {
      color: #0077cc;
    }
    label {
      font-weight: bold;
      margin-top: 15px;
      display: block;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #bbb;
      border-radius: 4px;
      box-sizing: border-box;
    }
    .checkbox-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 8px;
    }
    .checkbox-group label {
      display: flex;
      align-items: center;
      font-weight: normal;
      gap: 10px;
    }
    .checkbox-group label input[type="checkbox"] {
      width: auto;
      margin: 0;
    }
    button {
      margin-top: 25px;
      padding: 12px 20px;
      border: none;
      background-color: #0077cc;
      color: white;
      cursor: pointer;
      border-radius: 4px;
      font-size: 16px;
    }
    button:hover {
      background-color: #005ea0;
    }
    .success {
      margin-top: 20px;
      padding: 15px;
      background-color: #e3f5e3;
      border-left: 5px solid #2d8a2d;
    }
    .zusatzfragen {
      margin-top: 10px;
    }

     /* üåê MOBILE OPTIMIERUNG */
    @media (max-width: 768px) {
      body {
        max-width: 100%;
        margin: 0;
        padding: 15px;
      }

      h1 {
        font-size: 1.5rem;
        line-height: 1.2;
      }

      label {
        font-size: 0.95rem;
        margin-top: 12px;
      }

      input, select, textarea {
        font-size: 1rem;
        padding: 10px;
      }

      button {
        font-size: 1rem;
        padding: 12px;
      }

      .checkbox-group label {
        font-size: 0.95rem;
      }

      .checkbox-group {
        gap: 4px;
      }

      .success {
        font-size: 0.95rem;
      }
    }

    /* üì± SEHR KLEINE BILDSCHIRME */
    @media (max-width: 480px) {
      body {
        padding: 10px;
      }

      h1 {
        font-size: 1.3rem;
      }

      button {
        padding: 10px;
        font-size: 0.95rem;
      }

      input, select, textarea {
        font-size: 1.2rem;
      }

      .checkbox-group label {
        font-size: 0.9rem;
      }
    }
  </style>
</head>

<body>

<h1>Bedarfsfeststellung f√ºr digitales Fach- und Sprachlernen</h1>
<p>Bitte beantworten Sie die folgenden Fragen, damit wir ein passendes Lernangebot entwickeln k√∂nnen.</p>

<form id="bedarfForm">
  <label for="unternehmen">Name des Betriebs/Unternehmens</label>
  <input type="text" id="unternehmen" name="unternehmen" required>

  <label for="anzahl">Anzahl der Mitarbeitenden</label>
  <input type="number" id="anzahl" name="anzahl" min="1" required>

  <label for="sprachniveau">Sprachniveaus der Mitarbeitenden</label>
  <select id="sprachniveau" name="sprachniveau">
    <option>A1</option>
    <option>A2</option>
    <option>B1</option>
    <option>B2</option>
    <option>C1 oder h√∂her</option>
    <option>gemischt / unklar</option>
  </select>

  <label>Fachliche Ziele</label>
  <div class="checkbox-group">
    <label><input type="checkbox" name="fachlicheZiele" value="Fachwortschatz erweitern"> Fachwortschatz erweitern</label>
    <label><input type="checkbox" name="fachlicheZiele" value="Abl√§ufe und Prozesse verstehen"> Abl√§ufe und Prozesse verstehen</label>
    <label><input type="checkbox" name="fachlicheZiele" value="Arbeitssicherheit"> Arbeitssicherheit</label>
    <label><input type="checkbox" name="fachlicheZiele" value="Schulungen"> Teilnahme an fachlichen Schulungen</label>
    <label><input type="checkbox" name="fachlicheZiele" value="Dokumentation"> Dokumentationen/Berichte verstehen</label>
    <label><input type="checkbox" name="fachlicheZiele" value="Kommunikation Vorgesetzte"> Kommunikation Vorgesetzte/Kolleginnen</label>
    <label><input type="checkbox" name="fachlicheZiele" value="Kundenkontakt"> Kundenkontakt</label>
    <label><input type="checkbox" name="fachlicheZiele" value="Digitale Systeme"> Nutzung digitaler Systeme</label>
    <label><input type="checkbox" name="fachlicheZiele" value="Qualifizierungen"> Unterst√ºtzung bei Pr√ºfungen/Qualifizierungen</label>
  </div>

  <label>Kommunikative Ziele</label>
  <div class="checkbox-group">
    <label><input type="checkbox" name="kommunikativeZiele" value="Alltagskommunikation"> Alltagskommunikation im Betrieb</label>
    <label><input type="checkbox" name="kommunikativeZiele" value="Gespr√§chsf√ºhrung"> Gespr√§chsf√ºhrung</label>
    <label><input type="checkbox" name="kommunikativeZiele" value="Telefon"> Telefongespr√§che</label>
    <label><input type="checkbox" name="kommunikativeZiele" value="Schriftliche Mitteilungen"> Schriftliche Mitteilungen</label>
    <label><input type="checkbox" name="kommunikativeZiele" value="Aussprache"> Ausspracheverbesserung</label>
    <label><input type="checkbox" name="kommunikativeZiele" value="Probleme beschreiben"> Probleme/Arbeitsauftr√§ge beschreiben</label>
  </div>

  <label for="brancheSelect">Branchenspezifische Ziele</label>
  <select id="brancheSelect" name="branche">
    <option value="">Bitte ausw√§hlen</option>
    <option value="pflege">Pflege</option>
    <option value="gastronomie">Gastronomie</option>
    <option value="logistik">Logistik</option>
    <option value="andere">Andere Branche</option>
  </select>

  <div id="brancheEingabe" style="display:none; margin-top:10px;">
    <label for="brancheText">Andere Branche</label>
    <input type="text" id="brancheText" name="andereBranche" placeholder="Branche eingeben">
  </div>

  <div id="zusatzfragenContainer" style="display:none; margin-top:20px;">
    <div id="fragen-pflege" class="zusatzfragen" style="display:none;">
      <label>Pflegebezogene Ziele</label>
      <div class="checkbox-group">
        <label><input type="checkbox" name="pflegeZiele" value="Pflegedokumentation"> Pflegedokumentation</label>
        <label><input type="checkbox" name="pflegeZiele" value="Gespr√§ch Patientinnen"> Gespr√§che mit Patientinnen</label>
        <label><input type="checkbox" name="pflegeZiele" value="Medizinischer Wortschatz"> Medizinischer Wortschatz</label>
      </div>
    </div>
    <div id="fragen-gastronomie" class="zusatzfragen" style="display:none;">
      <label>Ziele in der Gastronomie</label>
      <div class="checkbox-group">
        <label><input type="checkbox" name="gastronomieZiele" value="Speisekarte erkl√§ren"> Speisekarte erkl√§ren</label>
        <label><input type="checkbox" name="gastronomieZiele" value="Bestellungen aufnehmen"> Bestellungen aufnehmen</label>
        <label><input type="checkbox" name="gastronomieZiele" value="Kundengespr√§che"> Kundengespr√§che</label>
      </div>
    </div>
    <div id="fragen-logistik" class="zusatzfragen" style="display:none;">
      <label>Ziele in der Logistik</label>
      <div class="checkbox-group">
        <label><input type="checkbox" name="logistikZiele" value="Lieferscheine verstehen"> Lieferscheine verstehen</label>
        <label><input type="checkbox" name="logistikZiele" value="Sicherheitsanweisungen"> Sicherheitsanweisungen</label>
        <label><input type="checkbox" name="logistikZiele" value="Warenbeschreibungen"> Warenbeschreibungen</label>
      </div>
    </div>
    <div id="fragen-allgemein" class="zusatzfragen" style="display:none;">
      <label>Allgemeine arbeitsbezogene Ziele</label>
      <div class="checkbox-group">
        <label><input type="checkbox" name="allgemeinZiele" value="Fachgespr√§che"> Fachgespr√§che</label>
        <label><input type="checkbox" name="allgemeinZiele" value="Einarbeitung"> Einarbeitung neuer Aufgaben</label>
      </div>
    </div>
  </div>

  <label for="weitereZiele">Weitere individuelle Ziele</label>
  <textarea id="weitereZiele" name="weitereZiele" rows="3"></textarea>

  <label for="kontakt">Kontaktperson (Name, E-Mail, Telefon)</label>
  <textarea id="kontakt" name="kontakt" rows="3" required></textarea>

  <button type="submit">Absenden</button>
</form>

<div id="feedback"></div>
<script>
const brancheSelect = document.getElementById("brancheSelect");

brancheSelect.addEventListener("change", () => {
  const branche = brancheSelect.value;
  document.getElementById("brancheEingabe").style.display = branche === "andere" ? "block" : "none";

  const container = document.getElementById("zusatzfragenContainer");
  container.style.display = branche ? "block" : "none";

  document.querySelectorAll(".zusatzfragen").forEach(el => el.style.display = "none");

  if(branche === "pflege") document.getElementById("fragen-pflege").style.display = "block";
  if(branche === "gastronomie") document.getElementById("fragen-gastronomie").style.display = "block";
  if(branche === "logistik") document.getElementById("fragen-logistik").style.display = "block";
  if(branche === "andere") document.getElementById("fragen-allgemein").style.display = "block";
});

document.getElementById("bedarfForm").addEventListener("submit", async function(event){
  event.preventDefault();

  const formData = new FormData(this);
  const jsonData = {};

  formData.forEach((value, key) => {
    if(jsonData[key]){
      if(!Array.isArray(jsonData[key])) jsonData[key] = [jsonData[key]];
      jsonData[key].push(value);
    } else {
      jsonData[key] = value;
    }
  });

  try{
    const response = await fetch("/submit", {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify(jsonData)
    });

    const result = await response.json();

    document.getElementById("feedback").innerHTML = `<div class="success">${result.message}</div>`;
    this.reset();
  }catch(e){
    document.getElementById("feedback").innerHTML = `<div class="success">Fehler beim Absenden. Bitte versuchen Sie es erneut.</div>`;
    console.error(e);
  }
});
</script>

